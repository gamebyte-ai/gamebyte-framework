<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Archero Menu (Simple) - GameByte Framework V2.0</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            overflow: hidden;
            background: #000;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            touch-action: none;
        }
        #game-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100vw;
            height: 100vh;
        }
        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 24px;
            z-index: 100;
            text-align: center;
        }
        #info {
            position: fixed;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 14px;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
            z-index: 50;
        }
    </style>
</head>
<body>
    <div id="loading">Loading GameByte Framework V2.0...</div>
    <div id="game-container"></div>
    <div id="info" style="display: none;">
        <strong>GameByte Framework V2.0</strong><br>
        Modular ArcheroMenu Demo<br>
        <span id="current-section">Section: Campaign</span><br>
        Swipe or tap to navigate
    </div>

    <!-- Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@8/dist/pixi.min.js"></script>
    <!-- @pixi/layout is already bundled in gamebyte.umd.js -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
    <script src="./dist/gamebyte.umd.js?v=2000"></script>

    <script>
        /**
         * Archero-Style Simple Menu Demo (Standalone)
         *
         * This demo uses direct PIXI.js v8 API for standalone operation.
         * For framework-integrated usage, use:
         * - graphics().createGraphics() instead of new PIXI.Graphics()
         * - graphics().createContainer() instead of new PIXI.Container()
         * - graphics().createText() instead of new PIXI.Text()
         *
         * See ArcheroMenu component for the framework-integrated version.
         */
        (async () => {
            try {
                console.log('Starting GameByte Framework V2.0 Demo...');

                const { GameByte, ArcheroMenu, ARCHERO_COLORS, graphics } = GameByteFramework;

                // Canvas dimensions
                const BASE_WIDTH = 1080;
                const BASE_HEIGHT = 1920;

                // NEW SIMPLIFIED API: Just one line to create a 2D game!
                const game = await GameByte.quick2D('#game-container', BASE_WIDTH, BASE_HEIGHT, {
                    backgroundColor: 0x000000
                });

                console.log('GameByte quick2D initialized');

                // Create gradient background using the graphics() helper
                const gfx = graphics();
                const background = gfx.createGraphics();
                background.rect(0, 0, BASE_WIDTH, BASE_HEIGHT);
                background.fill({ color: 0x1a1a2e });

                // NEW: Direct stage access with game.stage
                game.stage.addChild(background);

                // Define menu sections
                const sections = [
                    { name: 'Shop', icon: 'shop', iconColor: ARCHERO_COLORS.red },
                    { name: 'Gear', icon: 'gear', iconColor: ARCHERO_COLORS.purple },
                    { name: 'Campaign', icon: 'campaign', iconColor: ARCHERO_COLORS.activeYellow },
                    { name: 'Trophy', icon: 'trophy', iconColor: ARCHERO_COLORS.green },
                    { name: 'Chest', icon: 'chest', iconColor: ARCHERO_COLORS.blue }
                ];

                console.log('Creating ArcheroMenu with', sections.length, 'sections');

                // Create Archero menu with V2.0 modular architecture
                const menu = new ArcheroMenu({
                    sections,
                    activeSection: 2, // Start with Campaign
                    canvasWidth: BASE_WIDTH,
                    canvasHeight: BASE_HEIGHT,
                    callbacks: {
                        onSectionChange: (index, section) => {
                            console.log('Section changed to:', section.name);
                            document.getElementById('current-section').textContent =
                                'Section: ' + section.name;
                        }
                    },
                    enableSwipe: true,
                    style: {
                        enableParticles: true
                    }
                });

                // Add menu to stage (ArcheroMenu extends PIXI.Container)
                game.stage.addChild(menu);

                console.log('ArcheroMenu added to stage');

                // NEW: Use game.onUpdate() for game loop callbacks if needed
                // game.onUpdate((deltaTime) => {
                //     // Update game logic here
                // });

                // Hide loading, show info
                document.getElementById('loading').style.display = 'none';
                document.getElementById('info').style.display = 'block';

                // Handle window resize
                window.addEventListener('resize', () => {
                    const canvas = game.getCanvas();
                    if (canvas) {
                        canvas.style.width = '100vw';
                        canvas.style.height = '100vh';
                    }
                });

                console.log('Demo ready! Try swiping or tapping buttons.');

            } catch (error) {
                console.error('Demo failed:', error);
                document.getElementById('loading').textContent = 'Error: ' + error.message;
                document.getElementById('loading').style.color = 'red';
            }
        })();
    </script>
</body>
</html>

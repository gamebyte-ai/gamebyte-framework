<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameByte Framework - Complete Example</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            overflow: hidden;
            background: #000;
            width: 100vw;
            height: 100vh;
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <!-- Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@8/dist/pixi.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>

    <!-- GameByte Framework -->
    <script src="dist/gamebyte.umd.js"></script>

    <script>
        const { ScreenLayoutManager, SplashScreen, LoadingScreen } = GameByteFramework;

        (async () => {
            // Create PixiJS app
            const app = new PIXI.Application();
            await app.init({
                width: window.innerWidth,
                height: window.innerHeight,
                backgroundColor: 0x1a1a2e,
                resolution: window.devicePixelRatio || 1,
                autoDensity: true,
                resizeTo: window
            });

            document.body.appendChild(app.canvas);

            // ===== 1. Show Splash Screen (Pure Logo, 1.5s) =====
            const splash = new SplashScreen(app.screen.width, app.screen.height, {
                brandName: 'GameByte',
                logoText: 'ðŸŽ®',
                displayDuration: 1500,
                onComplete: () => {
                    app.stage.removeChild(splash);
                    splash.destroy();
                    console.log('âœ… Splash completed!');
                }
            });

            app.stage.addChild(splash);
            await splash.show();

            // ===== 2. Show Loading Screen (Progress Bar) =====
            const loading = new LoadingScreen(app.screen.width, app.screen.height, {
                loadingText: 'Loading',
                onComplete: () => {
                    app.stage.removeChild(loading);
                    loading.destroy();
                    console.log('âœ… Loading completed!');
                }
            });

            app.stage.addChild(loading);
            await loading.show();

            // Simulate asset loading
            for (let i = 0; i <= 100; i += 10) {
                loading.setProgress(i / 100);
                await new Promise(resolve => setTimeout(resolve, 200));
            }

            await loading.complete();

            // ===== 3. Setup Main Scene with Layout Manager =====
            const layoutManager = new ScreenLayoutManager({
                topHudPercent: 8,
                bottomMenuPercent: 12,
                canvasWidth: app.screen.width,
                canvasHeight: app.screen.height
            });

            const layout = layoutManager.getLayout();

            // DEBUG: Show layout regions
            app.stage.addChild(layoutManager.createDebugGraphics());

            // Create containers
            const background = layoutManager.createRegionContainer('gameAreaBackground');
            const safeArea = layoutManager.createRegionContainer('safeArea');
            const topHud = layoutManager.createRegionContainer('topHud');
            const bottomMenu = layoutManager.createRegionContainer('bottomMenu');

            app.stage.addChild(background);
            app.stage.addChild(safeArea);
            app.stage.addChild(topHud);
            app.stage.addChild(bottomMenu);

            // Add placeholder content
            const addText = (container, text, region) => {
                const t = new PIXI.Text({
                    text,
                    style: { fontSize: 20, fill: 0xffffff, align: 'center' }
                });
                t.anchor.set(0.5);
                t.x = region.width / 2;
                t.y = region.height / 2;
                container.addChild(t);
            };

            addText(safeArea, 'SAFE AREA\n(Game Content)', layout.safeArea);
            addText(topHud, 'TOP HUD', layout.topHud);
            addText(bottomMenu, 'BOTTOM MENU', layout.bottomMenu);

            // Handle resize
            window.addEventListener('resize', () => {
                layoutManager.resize(app.screen.width, app.screen.height);
            });

            console.log('âœ… Game loaded!');
        })();
    </script>
</body>
</html>

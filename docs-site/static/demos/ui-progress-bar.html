<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIProgressBar Demo - GameByte Framework</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { overflow: hidden; background: #1a1a2e; }
        canvas { display: block; margin: 0 auto; }
    </style>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@8/dist/pixi.min.js"></script>
    <script src="/gamebyte.umd.js"></script>

    <script>
        const { createGame } = GameByteFramework;

        const CONFIG = { width: 400, height: 200 };

        const canvas = document.createElement('canvas');
        canvas.width = CONFIG.width;
        canvas.height = CONFIG.height;
        document.body.appendChild(canvas);

        const game = createGame();

        (async () => {
            await game.initialize(canvas, '2d');
            const renderer = game.make('renderer');
            const stage = renderer.getStage();

            // Background
            const bg = new PIXI.Graphics();
            bg.rect(0, 0, CONFIG.width, CONFIG.height);
            bg.fill(0x1a1a2e);
            stage.addChild(bg);

            // Title
            const title = new PIXI.Text({
                text: 'Progress Bars',
                style: { fontFamily: 'Arial Black', fontSize: 18, fill: 0xffffff }
            });
            title.x = CONFIG.width / 2 - title.width / 2;
            title.y = 10;
            stage.addChild(title);

            // Health Bar
            const healthLabel = new PIXI.Text({
                text: 'Health',
                style: { fontFamily: 'Arial', fontSize: 12, fill: 0x888888 }
            });
            healthLabel.x = 30;
            healthLabel.y = 45;
            stage.addChild(healthLabel);

            // Health bar background
            const healthBg = new PIXI.Graphics();
            healthBg.roundRect(30, 65, 300, 20, 10);
            healthBg.fill(0x374151);
            stage.addChild(healthBg);

            // Health bar fill
            let healthValue = 75;
            const healthFill = new PIXI.Graphics();
            healthFill.roundRect(30, 65, 300 * (healthValue / 100), 20, 10);
            healthFill.fill(0x22c55e);
            stage.addChild(healthFill);

            const healthText = new PIXI.Text({
                text: '75/100',
                style: { fontFamily: 'Arial', fontSize: 12, fill: 0xffffff }
            });
            healthText.x = 345;
            healthText.y = 68;
            stage.addChild(healthText);

            // XP Bar
            const xpLabel = new PIXI.Text({
                text: 'Experience',
                style: { fontFamily: 'Arial', fontSize: 12, fill: 0x888888 }
            });
            xpLabel.x = 30;
            xpLabel.y = 100;
            stage.addChild(xpLabel);

            const xpBg = new PIXI.Graphics();
            xpBg.roundRect(30, 120, 300, 14, 7);
            xpBg.fill(0x374151);
            stage.addChild(xpBg);

            let xpValue = 60;
            const xpFill = new PIXI.Graphics();
            xpFill.roundRect(30, 120, 300 * (xpValue / 100), 14, 7);
            xpFill.fill(0x8b5cf6);
            stage.addChild(xpFill);

            const xpText = new PIXI.Text({
                text: '60%',
                style: { fontFamily: 'Arial', fontSize: 12, fill: 0xffffff }
            });
            xpText.x = 345;
            xpText.y = 118;
            stage.addChild(xpText);

            // Energy Bar (segmented)
            const energyLabel = new PIXI.Text({
                text: 'Energy',
                style: { fontFamily: 'Arial', fontSize: 12, fill: 0x888888 }
            });
            energyLabel.x = 30;
            energyLabel.y = 150;
            stage.addChild(energyLabel);

            let energyValue = 3;
            const segmentWidth = 56;
            const segmentGap = 6;
            const energySegments = [];

            for (let i = 0; i < 5; i++) {
                const segment = new PIXI.Graphics();
                const x = 30 + i * (segmentWidth + segmentGap);
                const filled = i < energyValue;
                segment.roundRect(x, 170, segmentWidth, 18, 4);
                segment.fill(filled ? 0xfbbf24 : 0x374151);
                stage.addChild(segment);
                energySegments.push(segment);
            }

            const energyText = new PIXI.Text({
                text: '3/5',
                style: { fontFamily: 'Arial', fontSize: 12, fill: 0xffffff }
            });
            energyText.x = 345;
            energyText.y = 170;
            stage.addChild(energyText);

            // Animate bars periodically
            setInterval(() => {
                // Animate health
                healthValue = Math.max(10, Math.min(100, healthValue + (Math.random() > 0.5 ? 5 : -5)));
                healthFill.clear();
                healthFill.roundRect(30, 65, 300 * (healthValue / 100), 20, 10);
                healthFill.fill(healthValue > 30 ? 0x22c55e : 0xef4444);
                healthText.text = `${healthValue}/100`;

                // Animate XP
                xpValue = Math.min(100, xpValue + 2);
                if (xpValue >= 100) xpValue = 0;
                xpFill.clear();
                xpFill.roundRect(30, 120, 300 * (xpValue / 100), 14, 7);
                xpFill.fill(0x8b5cf6);
                xpText.text = `${xpValue}%`;
            }, 1000);

            game.start();
        })();
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Touch Input Demo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #1a1a2e;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: system-ui, sans-serif;
            gap: 20px;
            padding: 20px;
        }
        .touch-area {
            width: 100%;
            max-width: 400px;
            height: 300px;
            background: #0f0f23;
            border-radius: 12px;
            border: 2px dashed #4a4a6a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            touch-action: none;
            user-select: none;
        }
        .touch-point {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(99, 102, 241, 0.5);
            border: 3px solid #6366f1;
            transform: translate(-50%, -50%);
            pointer-events: none;
            transition: transform 0.1s;
        }
        .gesture-label {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-align: center;
            pointer-events: none;
        }
        .gesture-hint {
            color: #9ca3af;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            pointer-events: none;
        }
        .info-panel {
            background: #0f0f23;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .info-item {
            text-align: center;
        }
        .info-value {
            font-size: 1.25rem;
            font-weight: bold;
            color: #6366f1;
        }
        .info-label {
            font-size: 0.75rem;
            color: #9ca3af;
        }
        .swipe-arrow {
            font-size: 3rem;
            opacity: 0;
            transition: opacity 0.3s;
            position: absolute;
        }
        .swipe-arrow.show { opacity: 1; }
    </style>
</head>
<body>
    <div class="touch-area" id="touchArea">
        <div class="gesture-label" id="gestureLabel">Tap or Swipe</div>
        <div class="gesture-hint" id="gestureHint">Touch the area to interact</div>
        <div class="swipe-arrow" id="swipeArrow">→</div>
    </div>

    <div class="info-panel">
        <div class="info-item">
            <div class="info-value" id="tapCount">0</div>
            <div class="info-label">Taps</div>
        </div>
        <div class="info-item">
            <div class="info-value" id="swipeCount">0</div>
            <div class="info-label">Swipes</div>
        </div>
        <div class="info-item">
            <div class="info-value" id="lastGesture">-</div>
            <div class="info-label">Last Gesture</div>
        </div>
    </div>

    <script>
        const touchArea = document.getElementById('touchArea');
        const gestureLabel = document.getElementById('gestureLabel');
        const gestureHint = document.getElementById('gestureHint');
        const swipeArrow = document.getElementById('swipeArrow');
        const tapCountEl = document.getElementById('tapCount');
        const swipeCountEl = document.getElementById('swipeCount');
        const lastGestureEl = document.getElementById('lastGesture');

        let tapCount = 0;
        let swipeCount = 0;
        let startX, startY, startTime;
        let touchPoints = [];

        function createTouchPoint(x, y) {
            const point = document.createElement('div');
            point.className = 'touch-point';
            point.style.left = x + 'px';
            point.style.top = y + 'px';
            touchArea.appendChild(point);
            return point;
        }

        function showGesture(text, isSwipe = false, direction = '') {
            gestureLabel.textContent = text;
            gestureHint.textContent = isSwipe ? `Direction: ${direction}` : 'Touch detected!';
            lastGestureEl.textContent = text;

            if (isSwipe) {
                const arrows = { up: '↑', down: '↓', left: '←', right: '→' };
                swipeArrow.textContent = arrows[direction] || '→';
                swipeArrow.classList.add('show');
                setTimeout(() => swipeArrow.classList.remove('show'), 500);
            }
        }

        function handleStart(e) {
            e.preventDefault();
            const rect = touchArea.getBoundingClientRect();
            const touches = e.touches || [{ clientX: e.clientX, clientY: e.clientY }];

            touchPoints.forEach(p => p.remove());
            touchPoints = [];

            for (let touch of touches) {
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;
                touchPoints.push(createTouchPoint(x, y));
            }

            startX = touches[0].clientX;
            startY = touches[0].clientY;
            startTime = Date.now();
        }

        function handleMove(e) {
            e.preventDefault();
            const rect = touchArea.getBoundingClientRect();
            const touches = e.touches || [{ clientX: e.clientX, clientY: e.clientY }];

            touchPoints.forEach((point, i) => {
                if (touches[i]) {
                    point.style.left = (touches[i].clientX - rect.left) + 'px';
                    point.style.top = (touches[i].clientY - rect.top) + 'px';
                }
            });
        }

        function handleEnd(e) {
            e.preventDefault();
            const endX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
            const endY = e.changedTouches ? e.changedTouches[0].clientY : e.clientY;
            const endTime = Date.now();

            const deltaX = endX - startX;
            const deltaY = endY - startY;
            const deltaTime = endTime - startTime;
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);

            setTimeout(() => {
                touchPoints.forEach(p => p.remove());
                touchPoints = [];
            }, 200);

            if (distance < 10 && deltaTime < 300) {
                tapCount++;
                tapCountEl.textContent = tapCount;
                showGesture('Tap!');
            } else if (distance > 50 && deltaTime < 500) {
                swipeCount++;
                swipeCountEl.textContent = swipeCount;

                let direction;
                if (Math.abs(deltaX) > Math.abs(deltaY)) {
                    direction = deltaX > 0 ? 'right' : 'left';
                } else {
                    direction = deltaY > 0 ? 'down' : 'up';
                }
                showGesture('Swipe!', true, direction);
            }
        }

        touchArea.addEventListener('touchstart', handleStart, { passive: false });
        touchArea.addEventListener('touchmove', handleMove, { passive: false });
        touchArea.addEventListener('touchend', handleEnd, { passive: false });
        touchArea.addEventListener('mousedown', handleStart);
        touchArea.addEventListener('mousemove', handleMove);
        touchArea.addEventListener('mouseup', handleEnd);
    </script>
</body>
</html>
